BEGIN KZGZDLG

CHAIN IF ~Global("kzguizu","GLOBAL",1)~ THEN KZGZDLG GZ0
	@134
	== KZGZDLG @135
	== ANOMENJ IF ~InParty("Anomen") InMyArea("Anomen") !StateCheck("Anomen",CD_STATE_NOTVALID)~ THEN @201
	== KELDORJ IF ~InParty("Keldorn") InMyArea("Keldorn") !StateCheck("Keldorn",CD_STATE_NOTVALID)~ THEN @202
	== KZSWDLG @136
	== KZSWDLG @137	
	== KZGZDLG @138	
	== KZGZDLG @139		
	== KZSWDLG @140
	== KZGZDLG @141
	== KZSWDLG @142
	== KZGZDLG @183	
	== KZSWDLG @143
	END
	IF~~THEN REPLY @144 EXTERN KZSWDLG GZ1
	IF~~THEN REPLY @146 DO ~IncrementGlobal("kzguizu","GLOBAL",1)~ EXTERN KZSWDLG GZ2

CHAIN KZSWDLG GZ1
	@147
	== KZGZDLG @148	
	== KZGZDLG @149	
	END
	IF~~THEN REPLY @150 EXTERN KZGZDLG GZ3 	
	IF~~THEN REPLY @151 EXTERN KZGZDLG GZ3 	
 	
CHAIN KZSWDLG GZ2
	@154	
	== KZSWDLG @155	
	== KZGZDLG @156		
	== KZGZDLG @149	
	END
	IF~~THEN REPLY @157 EXTERN KZGZDLG GZ3 	
	IF~~THEN REPLY @151 EXTERN KZGZDLG GZ3 		
	
CHAIN KZGZDLG GZ3	
	@152
	END
	IF~~THEN REPLY @153
	DO ~IncrementGlobal("kzguizu","GLOBAL",1)
	ClearAllActions()
	StartCutSceneMode()
	StartCutScene("KZCUTG2")~
EXIT
	
BEGIN KZSWDLG

CHAIN IF~Global("kzshouwu","GLOBAL",0)~THEN KZSWDLG SW0
	@0
	END
	IF~~THEN REPLY @1 GOTO SW1
	IF~~THEN REPLY @2 GOTO SW1

CHAIN KZSWDLG SW1
	@3
	END
	IF~~THEN REPLY @4 GOTO SW2
	IF~~THEN REPLY @5 GOTO SW2

CHAIN KZSWDLG SW2
	@6
	END
	IF ~~ THEN REPLY @7 GOTO SW3
	IF ~~ THEN REPLY @8 GOTO SW3

CHAIN KZSWDLG SW3
	@9
	== KZSWDLG @10
	== ANOMENJ IF ~InParty("Anomen") InMyArea("Anomen") !StateCheck("Anomen",CD_STATE_NOTVALID)~ THEN @184
	== KELDORJ IF ~InParty("Keldorn") InMyArea("Keldorn") !StateCheck("Keldorn",CD_STATE_NOTVALID)~ THEN @185
	END
	IF ~~ THEN REPLY @11 GOTO SW4
	IF ~~ THEN REPLY @12 GOTO SW4

CHAIN KZSWDLG SW4
	@13
	== HAERDAJ IF ~InParty("Haerdalis") InMyArea("Haerdalis") !StateCheck("Haerdalis",CD_STATE_NOTVALID)~ THEN @191
	== CERNDJ IF ~InParty("Cernd") InMyArea("Cernd") !StateCheck("Cernd",CD_STATE_NOTVALID)~ THEN @187
	== KZSWDLG @14
	END
	IF ~~ THEN REPLY @15 GOTO SW5
	IF ~~ THEN REPLY @16 GOTO SW5

CHAIN KZSWDLG SW5
	@17
	== KZSWDLG @18
	== VICONIJ IF ~InParty("Viconia") InMyArea("Viconia") !StateCheck("Viconia",CD_STATE_NOTVALID)~ THEN @189
	== AERIEJ IF ~InParty("Aerie") InMyArea("Aerie") !StateCheck("Aerie",CD_STATE_NOTVALID)~ THEN @190	
	END
	IF ~Gender(Player1,MALE)~ THEN REPLY @19 GOTO SW6
	IF ~Gender(Player1,FEMALE)~ THEN REPLY @20 GOTO SW6

CHAIN KZSWDLG SW6
	@21
	== JAHEIRAJ IF ~InParty("Jaheira") InMyArea("Jaheira") !StateCheck("Jaheira",CD_STATE_NOTVALID)~ THEN @186
	== NALIAJ IF ~InParty("Nalia") InMyArea("Nalia") !StateCheck("Nalia",CD_STATE_NOTVALID)~ THEN @188
	END
	IF ~~ THEN REPLY @22 GOTO SW7.1 
	IF ~~ THEN REPLY @23 GOTO SW7.2
	IF ~~ THEN REPLY @24 GOTO SW7.3

CHAIN KZSWDLG SW7.1
	@25
	END
	IF ~~ THEN REPLY @26 GOTO SW8

CHAIN KZSWDLG SW7.2
	@27
	END
	IF ~~ THEN REPLY @26 GOTO SW8

CHAIN KZSWDLG SW7.3
	@28
	END
	IF ~~ THEN REPLY @26 GOTO SW8

CHAIN KZSWDLG SW8
	@29
	=@30
	END
	IF ~~ THEN REPLY @31 GOTO SW9
	IF ~~ THEN REPLY @33 GOTO SW9

CHAIN KZSWDLG SW9
	@34
	END
	IF ~~ THEN REPLY @35 GOTO SW10.1
	IF ~~ THEN REPLY @36 GOTO SW10.2

CHAIN KZSWDLG SW10.1
	@37
	END
	IF ~~ THEN REPLY @38 GOTO SW11
	IF ~~ THEN REPLY @42 GOTO SW11

CHAIN KZSWDLG SW10.2
	@39
	END
	IF ~~ THEN REPLY @38 GOTO SW11
	IF ~~ THEN REPLY @42 GOTO SW11	

CHAIN KZSWDLG SW11
	@40
	== KZSWDLG @41
	== EDWINJ IF ~InParty("Edwin") InMyArea("Edwin") !StateCheck("Edwin",CD_STATE_NOTVALID)~ THEN @192	
	END
	IF ~~ THEN REPLY @43 GOTO SW12

CHAIN KZSWDLG SW12
	@44
	== KZSWDLG @45
	== YOSHJ IF ~InParty("Yoshimo") InMyArea("Yoshimo") !StateCheck("Yoshimo",CD_STATE_NOTVALID)~ THEN @193
	END
	IF ~~ THEN REPLY @46 GOTO SW13.1

CHAIN KZSWDLG SW13.1
	@48
	END
	IF ~~ THEN REPLY @49 GOTO SW14 

CHAIN KZSWDLG SW14
	@51
	END
	IF ~~ THEN REPLY @52 GOTO SW15
	IF ~~ THEN REPLY @53 GOTO SW15
	
CHAIN KZSWDLG SW15
	@54
	== IMOEN2J IF ~InParty("Imoen2") InMyArea("Imoen2") !StateCheck("Imoen2",CD_STATE_NOTVALID)~ THEN @194	
	END
	IF ~~ THEN REPLY @55 GOTO SW16

CHAIN KZSWDLG SW16
	@57
	END
	IF ~~ THEN 
	DO ~SetGlobal("kzshouwu","GLOBAL",1)
	AddJournalEntry(@10013,QUEST)~
EXIT

CHAIN IF ~Global("kzshouwu","GLOBAL",1)
	Global("kzguizu","GLOBAL",0)~ THEN KZSWDLG AK0
	@58
	END
	IF ~AreaCheckObject("AR1000",Player1)~ THEN REPLY @114 GOTO AK6	
	IF ~Gender(Player1,MALE)~ THEN REPLY @100 GOTO AK5
	IF ~Gender(Player1,FEMALE)~ THEN REPLY @100 GOTO AK5.1 	
	IF ~~ THEN REPLY @61 GOTO AK2 
	IF ~~ THEN REPLY @73 GOTO AK3 
	IF ~~ THEN REPLY @85 GOTO AK4	
	IF ~~ THEN REPLY @59 GOTO AK1

CHAIN KZSWDLG AK1
	@60
	END
	IF ~~ THEN 
EXIT

CHAIN KZSWDLG AK2
	@62
	END
	IF ~~ THEN REPLY @63 GOTO AK2.1 
	IF ~~ THEN REPLY @64 GOTO AK2.1 

CHAIN KZSWDLG AK2.1
	@65
	END
	IF ~~ THEN REPLY @66 GOTO AK2.2
	IF ~~ THEN REPLY @67 GOTO AK2.2	

CHAIN KZSWDLG AK2.2
	@68
	END
	IF ~~ THEN REPLY @69 GOTO AK2.3 
	IF ~~ THEN REPLY @70 GOTO AK2.3 

CHAIN KZSWDLG AK2.3
	@71
	== MAZZYJ IF ~InParty("Mazzy") InMyArea("Mazzy") !StateCheck("Mazzy",CD_STATE_NOTVALID)~ THEN @195
	== KZSWDLG @72
	END
	IF ~~ THEN 
EXIT

CHAIN KZSWDLG AK3
	@74
	== KZSWDLG @75
	== VALYGARJ IF ~InParty("Valygar") InMyArea("Valygar") !StateCheck("Valygar",CD_STATE_NOTVALID)~ THEN @196
	END
	IF ~~ THEN REPLY @76 GOTO  AK3.1
	IF ~~ THEN REPLY @77 GOTO  AK3.1	

CHAIN KZSWDLG AK3.1
	@78
	END
	IF ~~ THEN REPLY @79 GOTO AK3.3

CHAIN KZSWDLG AK3.3
	@80
	END
	IF ~~ THEN REPLY @81 GOTO AK3.4

CHAIN KZSWDLG AK3.4
	@82
	=@83
	=@84
	END
	IF ~~ THEN 	
EXIT

CHAIN KZSWDLG AK4
	@86
	END
	IF ~~ THEN REPLY @87 GOTO AK4.1
	IF ~~ THEN REPLY @88 GOTO AK4.1

CHAIN KZSWDLG AK4.1
	@89	
	END
	IF ~~ THEN REPLY @90 GOTO AK4.2	

CHAIN KZSWDLG AK4.2
	@91
	== KORGANJ IF ~InParty("Korgan") InMyArea("Korgan") !StateCheck("Korgan",CD_STATE_NOTVALID)~ THEN @197
	== MINSCJ IF ~InParty("Minsc") InMyArea("Minsc") !StateCheck("Minsc",CD_STATE_NOTVALID)~ THEN @203	
	END
	IF ~~ THEN REPLY @92 GOTO AK4.3	
	IF ~~ THEN REPLY @93 GOTO AK4.3	

CHAIN KZSWDLG AK4.3
	@94
	== KZSWDLG @95
	== VICONIJ IF ~InParty("Viconia") InMyArea("Viconia") !StateCheck("Viconia",CD_STATE_NOTVALID)~ THEN @198
	END
	IF ~~ THEN REPLY @96 GOTO AK4.4	
	IF ~~ THEN REPLY @97 GOTO AK4.4	

CHAIN KZSWDLG AK4.4
	@98
	=@99
	END
	IF ~~ THEN 
EXIT

CHAIN KZSWDLG AK5
	@101
	END
	IF ~~ THEN REPLY @102 GOTO AK5.2
	IF ~~ THEN REPLY @103 GOTO AK5.2

CHAIN KZSWDLG AK5.1
	@104
	END
	IF ~~ THEN REPLY @105 GOTO AK5.2
	IF ~~ THEN REPLY @106 GOTO AK5.2

CHAIN KZSWDLG AK5.2
	@107
	== JAHEIRAJ IF ~InParty("Jaheira") InMyArea("Jaheira") !StateCheck("Jaheira",CD_STATE_NOTVALID)~ THEN @199
	== KZSWDLG @108
	END
	IF ~~ THEN REPLY @109 GOTO AK5.3 	

CHAIN KZSWDLG AK5.3
	@110
	END
	IF ~~ THEN REPLY @111 GOTO AK5.4 	

CHAIN KZSWDLG AK5.4
	@112
	=@113	
	END
	IF ~~ THEN 
EXIT

CHAIN KZSWDLG AK6
	@115
	END
	IF ~~ THEN REPLY @116 GOTO AK6.1
	IF ~~ THEN REPLY @117 GOTO AK6.1
	IF ~~ THEN REPLY @118 GOTO AK6.1
	IF ~~ THEN REPLY @119 GOTO AK6.1
	IF ~~ THEN REPLY @120 GOTO AK6.1
	IF ~~ THEN REPLY @121 GOTO AK6.1

CHAIN KZSWDLG AK6.1
	@122
	== JANJ IF ~InParty("Jan") InMyArea("Jan") !StateCheck("Jan",CD_STATE_NOTVALID)~ THEN @200
	== KZSWDLG @123
	END
	IF ~~ THEN REPLY @124 GOTO AK6.2
	IF ~~ THEN REPLY @125 GOTO AK6.2

CHAIN KZSWDLG AK6.2
	@126
	=@127
	END
	IF ~~ THEN REPLY @128 GOTO AK6.3

CHAIN KZSWDLG AK6.3
	@129
	END
	IF ~~ THEN REPLY @130 GOTO AK6.4	

CHAIN KZSWDLG AK6.4
	@131
	=@132
	END	
	IF ~~ THEN REPLY @133
	DO ~SetGlobal("kzguizu","GLOBAL",1)
	CreateCreature("kzgzcre",[2168.2905],3)
	ClearAllActions()
	StartCutSceneMode()
	StartCutScene("KZCUTG1")~
EXIT
	
CHAIN IF~Global("kzshouwu","GLOBAL",1)
	Global("kzguizu","GLOBAL",2)~ THEN KZSWDLG ZH0
	@158
	END
	IF ~~ THEN REPLY @159 GOTO ZH1
	IF ~~ THEN REPLY @160 GOTO ZH1		

CHAIN KZSWDLG ZH1
	@161
	END
	IF ~~ THEN REPLY @162 GOTO ZH2
	IF ~~ THEN REPLY @163 GOTO ZH2	

CHAIN KZSWDLG ZH2
	@164
	=@165
	=@166
	END
	IF ~~ THEN REPLY @167 GOTO ZH3	
	IF ~~ THEN REPLY @168 GOTO ZH3		

CHAIN KZSWDLG ZH3
	@169
	=@170
	END
	IF ~~ THEN REPLY @171 GOTO ZH4		

CHAIN KZSWDLG ZH4
	@172
	END	
	IF ~~ THEN 	
	DO~SetGlobal("kzshouwu","GLOBAL",2)
	EraseJournalEntry(@10013)	
	AddJournalEntry(@10014,QUEST_DONE)
	AddExperienceParty(3000)
	EscapeArea()~
EXIT

CHAIN IF~Global("kzshouwu","GLOBAL",1)
	Global("kzguizu","GLOBAL",3)~ THEN KZSWDLG ZH5	
	@173
	=@174
	END
	IF ~~ THEN REPLY @175 GOTO ZH6		
	IF ~~ THEN REPLY @176 GOTO ZH6		

CHAIN KZSWDLG ZH6
	@177
	END
	IF ~~ THEN REPLY @178 GOTO ZH7			
	IF ~~ THEN REPLY @179 GOTO ZH7	

CHAIN KZSWDLG ZH7
	@181
	=@166
	END
	IF ~~ THEN REPLY @167 GOTO ZH3	
	IF ~~ THEN REPLY @168 GOTO ZH3		
	
CHAIN IF~Global("kzshouwu","GLOBAL",3)~THEN KZSWDLG SNSW0	
	@204
	END
	IF ~~ THEN REPLY @205 GOTO SNSW1 		
	
CHAIN KZSWDLG SNSW1
	@207
	END
	IF ~~ THEN REPLY @209 GOTO SNSW2.1	
	
CHAIN KZSWDLG SNSW2.1
	@212
	END		
	IF ~~ THEN REPLY @213 GOTO SNSW3 	
	
CHAIN KZSWDLG SNSW3
	@214
	== KZLZDLG @215
	== KZSWDLG @216
	== KZJJDLG @217
	== KZSWDLG @218
	== KZJJDLG @219
	== KZPSDLG @220
	== KZSWDLG @221
	END
	IF ~~ THEN REPLY @222 GOTO SNSW4 		

CHAIN KZSWDLG SNSW4	
	@223
	END
	IF ~~ THEN REPLY @224 GOTO SNSW5 		
	
CHAIN KZSWDLG SNSW5		
	@225
	END
	IF ~~ THEN REPLY @226 GOTO SNSW6 	
	
CHAIN KZSWDLG SNSW6	
	@229
	END
	IF ~~ THEN 
EXIT	
	
CHAIN IF~Global("kzshouwu","GLOBAL",4)~THEN KZSWDLG SNSW7		
	@231
	END
	IF ~Global("kzshouwuDC","GLOBAL",0)~ THEN REPLY @232 GOTO SNSW7.1 		
	IF ~~ THEN REPLY @233 GOTO SNSW7.2 	
	
CHAIN KZSWDLG SNSW7.1	
	@235
	END
	IF ~~ THEN REPLY @237 GOTO SNSW7.11	
	
CHAIN KZSWDLG SNSW7.11	
	@238
	END
	IF ~~ THEN REPLY @239 GOTO SNSW7.12	
	
CHAIN KZSWDLG SNSW7.12	
	@240
	END
	IF ~~ THEN REPLY @234 GOTO SNSW7.13		
	
CHAIN KZSWDLG SNSW7.13		
	@241
	END
	IF ~~ THEN
	DO~SetGlobal("kzshouwuDC","GLOBAL",1)~
EXIT
	
CHAIN KZSWDLG SNSW7.2	
	@243
	END			
	IF ~~ THEN REPLY @245 GOTO SNSW7.22 	
	
CHAIN KZSWDLG SNSW7.22	
	@248
	END
	IF ~~ THEN REPLY @247 GOTO SNSW7.23			
	
CHAIN KZSWDLG SNSW7.23	
	@249
	END
	IF ~~ THEN 
EXIT	
	
CHAIN IF~Global("kzshouwu","GLOBAL",5)~THEN KZSWDLG TRSW1
	@256
	END
	IF ~~ THEN REPLY @257 GOTO TRSW2
 	
CHAIN KZSWDLG TRSW2
	@258
	END
	IF ~~ THEN REPLY @259 GOTO TRSW3	
	
CHAIN KZSWDLG TRSW3	
	@260
	=@261
	END
	IF ~~ THEN 
EXIT	
	
CHAIN IF~Global("kzshouwu","GLOBAL",6)~THEN KZSWDLG TRSW4
	@262
	END
	IF ~~ THEN REPLY @263 GOTO TRSW5	
	IF ~Global("kztoubu","GLOBAL",1)
	PartyHasItem("kzdanga")~ THEN REPLY @264 GOTO TRSW6	
	
CHAIN KZSWDLG TRSW5	
	@265
	END
	IF ~~ THEN REPLY @253 GOTO TRSW5.1	
	
CHAIN KZSWDLG TRSW5.1		
	@252
	END
	IF ~~ THEN 
EXIT

CHAIN KZSWDLG TRSW6	
	@251
	END		
	IF ~~ THEN REPLY @254 GOTO TRSW6.1		
	
CHAIN KZSWDLG TRSW6.1	
	@255
	== KZWFDLG @250
	== KZSWDLG @246
	END
	IF ~~ THEN 	
	DO~SetGlobal("kztoubu","GLOBAL",2)~
EXIT	
	
CHAIN IF~Global("kzshouwu","GLOBAL",7)~THEN KZSWDLG TRSW7
	@244
	END
	IF ~~ THEN REPLY @242 GOTO TRSW7.1
	
CHAIN KZSWDLG TRSW7.1	
	@236
	=@230
	END
	IF ~~ THEN 
EXIT	
	
CHAIN IF~Global("kzshouwu","GLOBAL",8)~THEN KZSWDLG TRSW8
	@228
	END
	IF ~~ THEN REPLY @227 GOTO TRSW8.1
	
CHAIN KZSWDLG TRSW8.1
	@211
	END
	IF ~~ THEN 
EXIT	
	
CHAIN IF~Global("kzshouwu","GLOBAL",10)~THEN KZSWDLG TRSW9
	@210
	END
	IF ~~ THEN 
EXIT		
	
CHAIN IF~Global("kzshouwu","GLOBAL",12)~THEN KZSWDLG TRSW10
	@208
	END
	IF ~~ THEN REPLY @206 GOTO TRSW10.1
	
CHAIN KZSWDLG TRSW10.1
	@182
	END
	IF ~~ THEN REPLY @180 GOTO TRSW10.2	
	
CHAIN KZSWDLG TRSW10.2
	@145
	== KZSWDLG @56
	== KZSWDLG @50
	== KZJJDLG @47
	== KZSWDLG @32
	END
	IF ~~ THEN
EXIT	
	
