EXTEND_BOTTOM BERNARD 22
	IF ~Global("kzjianjing","GLOBAL",1)
	Global("kzxiangcai","GLOBAL",0)~ THEN REPLY @68 GOTO b0
	END

CHAIN BERNARD b0
	@69
	END
	IF ~~ THEN REPLY @70 GOTO b1
	IF ~~ THEN REPLY @71 GOTO b1
	IF ~~ THEN REPLY @72 GOTO b1

CHAIN BERNARD b1
	@73
	END
	IF ~~ THEN REPLY @74 GOTO b2
	IF ~~ THEN REPLY @75 GOTO b2

CHAIN BERNARD b2
	@76
	=@77
	END
	IF ~~ THEN REPLY @78 GOTO b3

CHAIN BERNARD b3
	@79
	END
	IF ~CheckStatGT(Player1,15,STR)~ THEN REPLY @80 GOTO b4	
	IF ~CheckStatGT(Player1,15,INT)~ THEN REPLY @81 GOTO b4		
	IF ~CheckStatGT(Player1,15,WIS)~ THEN REPLY @82 GOTO b4			
	IF ~CheckStatGT(Player1,15,CHR)~ THEN REPLY @83 GOTO b4			
	IF ~PartyGoldGT(200)~ THEN REPLY @84 GOTO b5		
	IF ~~ THEN REPLY @89 GOTO b7

CHAIN BERNARD b4
	@86
	=@87
	END	
	IF ~PartyGoldGT(100)~ THEN REPLY @88 GOTO b6	
	IF ~~ THEN REPLY @89 GOTO b7
	
CHAIN BERNARD b5
	@85
	END
	IF ~~ THEN
	DO ~TakePartyGold(200)
	GiveItemCreate("kzxiang",Player1,1,0,0) 
	SetGlobal("kzxiangcai","GLOBAL",1)
	AddJournalEntry(@10005,QUEST)~
EXIT

CHAIN BERNARD b6
	@85
	END
	IF ~~ THEN
	DO ~TakePartyGold(100)
	GiveItemCreate("kzxiang",Player1,1,0,0) 
	SetGlobal("kzxiangcai","GLOBAL",1)
	AddJournalEntry(@10005,QUEST)~
EXIT

CHAIN BERNARD b7
	@90
	END
	IF ~~ THEN
EXIT

BEGIN KZJJDLG

CHAIN IF~Global("kzjianjing","GLOBAL",0)~THEN KZJJDLG JJ0
	@0
	END
	IF ~~ THEN REPLY @1 GOTO JJ1
	IF ~~ THEN REPLY @2 GOTO JJ1

CHAIN KZJJDLG JJ1
	@3
	=@4
	=@67
	END
	IF ~~ THEN REPLY @5 GOTO JJ2
	IF ~~ THEN REPLY @6 GOTO JJ2

CHAIN KZJJDLG JJ2
	@7
	== KZJJDLG @8
	== MINSCJ IF ~InParty("Minsc") InMyArea("Minsc") !StateCheck("Minsc",CD_STATE_NOTVALID)~ THEN @222
	END
	IF ~~ THEN REPLY @9 GOTO JJ3.1	
	IF ~~ THEN REPLY @10 GOTO JJ3.1

CHAIN KZJJDLG JJ3.1
	@16
	== KELDORJ IF ~InParty("Keldorn")InMyArea("Keldorn") !StateCheck("Keldorn",CD_STATE_NOTVALID)~ THEN @224
	END
	IF ~~ THEN REPLY @17 GOTO JJ4	
	IF ~~ THEN REPLY @18 GOTO JJ4.1

CHAIN KZJJDLG JJ4.1
	@19
	== EDWINJ IF ~InParty("Edwin") InMyArea("Edwin") !StateCheck("Edwin",CD_STATE_NOTVALID)~ THEN @225
	== KZJJDLG @20
	END
	IF ~~ THEN REPLY @21 GOTO JJ4

CHAIN KZJJDLG JJ4
	@22
	END
	IF ~~ THEN REPLY @23 GOTO JJ5	

CHAIN KZJJDLG JJ5
	@25
	== KZJJDLG @26
	== HAERDAJ IF ~InParty("Haerdalis") InMyArea("Haerdalis") !StateCheck("Haerdalis",CD_STATE_NOTVALID)~ THEN @227
	END
	IF ~~ THEN REPLY @27 GOTO JJ6.1
	IF ~~ THEN REPLY @28 GOTO JJ6.1

CHAIN KZJJDLG JJ6.1	
	@32
	END
	IF ~~ THEN REPLY @33 GOTO JJ7

CHAIN KZJJDLG JJ7
	@35
	=@47
	=@48
	=@49
	END
	IF ~~ THEN REPLY @50 GOTO JJ9

CHAIN KZJJDLG JJ9
	@51
	== YOSHJ IF ~InParty("Yoshimo") InMyArea("Yoshimo") !StateCheck("Yoshimo",CD_STATE_NOTVALID)~ THEN @228	
	END
	IF ~~ THEN REPLY @52 GOTO JJ9.1
	IF ~~ THEN REPLY @53 GOTO JJ9.2	
	IF ~~ THEN REPLY @54 GOTO JJ9.3	

CHAIN KZJJDLG JJ9.3
	@55
	END
	IF ~~ THEN REPLY @52 GOTO JJ9.1	
	IF ~~ THEN REPLY @53 GOTO JJ9.2	

CHAIN KZJJDLG JJ9.1
	@56
	END
	IF ~~ THEN REPLY @54 GOTO JJ9.3
	IF ~~ THEN REPLY @53 GOTO JJ9.2		

CHAIN KZJJDLG JJ9.2
	@57
	END
	IF ~~ THEN REPLY @58 GOTO JJ10	
	IF ~~ THEN REPLY @59 GOTO JJ10		
	IF ~~ THEN REPLY @60 GOTO JJ10.1

CHAIN KZJJDLG JJ10
	@61
	== JANJ IF ~InParty("Jan") InMyArea("Jan") !StateCheck("Jan",CD_STATE_NOTVALID)~ THEN @229
	END
	IF ~~ THEN REPLY @60 GOTO JJ10.1	

CHAIN KZJJDLG JJ10.1
	@62
	== IMOEN2J IF ~InParty("Imoen2") InMyArea("Imoen2") !StateCheck("Imoen2",CD_STATE_NOTVALID)~ THEN @230	
	== KZJJDLG @63
	END
	IF ~~ THEN REPLY @64 GOTO JJ11		

CHAIN KZJJDLG JJ11
	@65
	=@66
	END
	IF ~~ THEN
	DO ~SetGlobal("kzjianjing","GLOBAL",1)
	AddJournalEntry(@10004,QUEST)~
EXIT

CHAIN IF~Global("kzjianjing","GLOBAL",1)~THEN KZJJDLG yx0
	@91
	END
	IF ~Global("kzxiangcai","GLOBAL",1)
	PartyHasItem("kzxiang")~ THEN REPLY @92 GOTO yx1
	IF ~~ THEN REPLY @93 GOTO yx2
	IF ~~ THEN REPLY @94 GOTO yx3	
	IF ~~ THEN REPLY @95 GOTO yx4	
	IF ~~ THEN REPLY @96 GOTO yx5	
	IF ~~ THEN REPLY @220 GOTO yx8

CHAIN KZJJDLG yx1
	@98
	=@99
	END
	IF ~~ THEN
	DO ~SetGlobal("kzxiangcai","GLOBAL",2)
	TakePartyItem("kzxiang")~
	REPLY @100 GOTO yx1.1	

CHAIN KZJJDLG yx1.1
	@101
	== KZJJDLG @102
	== KZJJDLG @103
	== VICONIJ IF ~InParty("Viconia") InMyArea("Viconia") !StateCheck("Viconia",CD_STATE_NOTVALID)~ THEN @231
	== KZJJDLG @104
	END
	IF ~~ THEN REPLY @105 GOTO yx1.2		
	IF ~~ THEN REPLY @106 GOTO yx1.21	
	IF ~~ THEN REPLY @107 GOTO yx1.22	

CHAIN KZJJDLG yx1.2
	@108
	=@109
	END
	IF ~~ THEN REPLY @110 GOTO yx1.3
	IF ~~ THEN REPLY @111 GOTO yx1.3		
	IF ~~ THEN REPLY @112 GOTO yx1.3

CHAIN KZJJDLG yx1.21
	@118
	=@109
	END
	IF ~~ THEN REPLY @110 GOTO yx1.3
	IF ~~ THEN REPLY @111 GOTO yx1.3		
	IF ~~ THEN REPLY @112 GOTO yx1.3

CHAIN KZJJDLG yx1.22
	@119
	=@109
	END
	IF ~~ THEN REPLY @110 GOTO yx1.3
	IF ~~ THEN REPLY @111 GOTO yx1.3		
	IF ~~ THEN REPLY @112 GOTO yx1.3

CHAIN KZJJDLG yx1.3
	@113
	=@114
	END
	IF ~~ THEN REPLY @115 GOTO yx1.4
	IF ~~ THEN REPLY @116 GOTO yx1.4

CHAIN KZJJDLG yx1.4
	@120
	=@121
	=@122
	END
	IF ~~ THEN REPLY @132 GOTO yx7

CHAIN KZJJDLG yx7
	@133
	=@134
	=@135
	END
	IF ~~ THEN REPLY @136 GOTO yx7.1

CHAIN KZJJDLG yx7.1
	@138
	END
	IF ~~ THEN 
	DO ~SetGlobal("kzjianjing","GLOBAL",2)
	EraseJournalEntry(@10004)
	EraseJournalEntry(@10005)	
	AddJournalEntry(@10006,QUEST_DONE)
	AddExperienceParty(3000)
	EscapeArea()~
EXIT

CHAIN KZJJDLG yx2
	@142
	END
	IF ~~ THEN REPLY @143 GOTO yx2.1
	IF ~~ THEN REPLY @144 GOTO yx2.1	
	IF ~~ THEN REPLY @145 GOTO yx2.1	

CHAIN KZJJDLG yx2.1
	@146
	== NALIAJ IF ~InParty("Nalia") InMyArea("Nalia") !StateCheck("Nalia",CD_STATE_NOTVALID)~ THEN @234
	END
	IF ~~ THEN REPLY @147 GOTO yx2.2	
	IF ~~ THEN REPLY @148 GOTO yx2.2

CHAIN KZJJDLG yx2.2
	@149
	== KZJJDLG @150
	== ANOMENJ IF ~InParty("Anomen") InMyArea("Anomen") !StateCheck("Anomen",CD_STATE_NOTVALID)~ THEN @233
	END
	IF ~~ THEN REPLY @151 GOTO yx2.3		
	IF ~~ THEN REPLY @152 GOTO yx2.3	
	IF ~~ THEN REPLY @153 GOTO yx2.4	

CHAIN KZJJDLG yx2.3
	@154
	=@155	
	END	
	IF ~~ THEN REPLY @156 GOTO yx2.5
	IF ~~ THEN REPLY @157 GOTO yx2.5	

CHAIN KZJJDLG yx2.5
	@158
	=@159
	END
	IF ~~ THEN 
EXIT

CHAIN KZJJDLG yx2.4	
	@160
	=@161	
	END
	IF ~~ THEN REPLY @162 GOTO yx2.5 
	IF ~~ THEN REPLY @163 GOTO yx2.5 	

CHAIN KZJJDLG yx3
	@164
	END
	IF ~~ THEN REPLY @166 GOTO yx3.1	

CHAIN KZJJDLG yx3.1
	@167
	END
	IF ~~ THEN REPLY @168 GOTO yx3.2	
	IF ~~ THEN REPLY @169 GOTO yx3.2	

CHAIN KZJJDLG yx3.2
	@170
	== KZJJDLG@171
	== VALYGARJ IF ~InParty("Valygar") InMyArea("Valygar") !StateCheck("Valygar",CD_STATE_NOTVALID)~ THEN @236
	END
	IF ~~ THEN REPLY @172 GOTO yx3.3	

CHAIN KZJJDLG yx3.3	
	@173
	=@174
	END
	IF ~~ THEN REPLY @175 GOTO yx3.4		

CHAIN KZJJDLG yx3.4
	@176
	== KZJJDLG @177
	== KORGANJ IF ~InParty("Korgan") InMyArea("Korgan") !StateCheck("Korgan",CD_STATE_NOTVALID)~ THEN @235
	== KZJJDLG @178
	END
	IF ~~ THEN REPLY @179 GOTO yx3.5  

CHAIN KZJJDLG yx3.5	
	@180	
	=@181
	END
	IF ~~ THEN 
EXIT

CHAIN KZJJDLG yx4
	@184
	=@185
	=@186
	END
	IF ~~ THEN REPLY @187 GOTO yx4.1	
	IF ~~ THEN REPLY @189 GOTO yx4.1	

CHAIN KZJJDLG yx4.1
	@190
	=@191
	END
	IF ~~ THEN REPLY @192 GOTO yx4.2		

CHAIN KZJJDLG yx4.2
	@193
	END
	IF ~~ THEN 	
EXIT

CHAIN KZJJDLG yx5
	@194
	END
	IF ~~ THEN REPLY @195 GOTO yx5.1
	IF ~~ THEN REPLY @196 GOTO yx5.1

CHAIN KZJJDLG yx5.1
	@198
	END
	IF ~~ THEN REPLY @200 GOTO yx5.2
	IF ~~ THEN REPLY @201 GOTO yx5.2

CHAIN KZJJDLG yx5.2
	@202
	=@203
	END
	IF ~~ THEN REPLY @204 GOTO yx5.3

CHAIN KZJJDLG yx5.3
	@205
	END
	IF ~~ THEN
EXIT

CHAIN KZJJDLG yx8
	@221
	END
	IF ~~ THEN
EXIT

CHAIN IF~Global("kzjianjing","GLOBAL",3)~THEN KZJJDLG SNJJ0
	@237	
	END
	IF ~~ THEN REPLY @239 GOTO SNJJ1 

CHAIN KZJJDLG SNJJ1
	@241
	END
	IF ~~ THEN REPLY @242 GOTO SNJJ2	

CHAIN KZJJDLG SNJJ2
	@243
	== KZSWDLG @244
	== KZLZDLG @245
	== KZSWDLG @246
	== KZJJDLG @247
	END
	IF ~~ THEN REPLY @248 GOTO SNJJ3	
	
CHAIN KZJJDLG SNJJ3	
	@251
	END
	IF ~~ THEN REPLY @252 GOTO SNJJ4
	
CHAIN KZJJDLG SNJJ4	
	@254
	== KZJJDLG @255
	== KZSWDLG @256
	== KZJJDLG @257
	== KZPSDLG @258
	END
	IF ~~ THEN
EXIT	
	
CHAIN IF~Global("kzjianjing","GLOBAL",4)~THEN KZJJDLG SNJJ5	
	@259
	END
	IF ~Global("kzjianjingDC","GLOBAL",0)~ THEN REPLY @260 GOTO SNJJ6		
	IF ~~ THEN REPLY @261 GOTO SNJJ7	
	
CHAIN KZJJDLG SNJJ6
	@263
	END
	IF ~~ THEN REPLY @265 GOTO SNJJ6.1 	
	
CHAIN KZJJDLG SNJJ6.1
	@266
	END
	IF ~~ THEN REPLY @267 GOTO SNJJ6.2 	
	
CHAIN KZJJDLG SNJJ6.2	
	@268
	END
	IF ~~ THEN REPLY @269 GOTO SNJJ6.3 	
	
CHAIN KZJJDLG SNJJ6.3	
	@270
	=@264
	END
	IF ~~ THEN REPLY @262 GOTO SNJJ6.4 	
	
CHAIN KZJJDLG SNJJ6.4		
	@253
	END
	IF ~~ THEN 
	DO~SetGlobal("kzjianjingDC","GLOBAL",1)~
EXIT	
	
CHAIN KZJJDLG SNJJ7	
	@250
	=@249
	END
	IF ~~ THEN REPLY @240 GOTO SNJJ7.1
	
CHAIN KZJJDLG SNJJ7.1	
	@238
	=@232
	END
	IF ~~ THEN 
EXIT
		
CHAIN IF~Global("kzjianjing","GLOBAL",5)~THEN KZJJDLG TRJJ1
	@226
	END
	IF ~~ THEN REPLY @223 GOTO TRJJ2
 	
CHAIN KZJJDLG TRJJ2
	@219
	END
	IF ~~ THEN REPLY @218 GOTO TRJJ3	
	
CHAIN KZJJDLG TRJJ3	
	@217
	=@216
	END
	IF ~~ THEN 
EXIT
	
CHAIN IF~Global("kzjianjing","GLOBAL",6)~THEN KZJJDLG TRJJ4	
	@215
	END
	IF ~~ THEN REPLY @214 GOTO TRJJ4.1	
	IF ~Global("kzshuangshou","GLOBAL",1)
	PartyHasItem("kzdanga")~ THEN REPLY @213 GOTO TRJJ4.2			

CHAIN KZJJDLG TRJJ4.1
	@212
	END
	IF ~~ THEN REPLY @211 GOTO TRJJ4.11	
	
CHAIN KZJJDLG TRJJ4.11
	@210
	=@209
	END
	IF ~~ THEN 
EXIT

CHAIN KZJJDLG TRJJ4.2	
	@208
	END
	IF ~~ THEN REPLY @207 GOTO TRJJ4.21		
	
CHAIN KZJJDLG TRJJ4.21		
	@206
	== KZJJDLG @199
	== KZWFDLG @197
	== KZJJDLG @183
	== KZWFDLG @182
	== KZJJDLG @165
	== KZWFDLG @141
	== KZJJDLG @140
	END
	IF ~~ THEN 
	DO~SetGlobal("kzshuangshou","GLOBAL",2)~	
EXIT		
	
CHAIN IF~Global("kzjianjing","GLOBAL",7)~THEN KZJJDLG TRJJ5	
	@139
	END
	IF ~~ THEN REPLY @137 GOTO TRJJ5.1
	
CHAIN KZJJDLG TRJJ5.1	
	@131
	=@130
	END
	IF ~~ THEN 
EXIT	
	
CHAIN IF~Global("kzjianjing","GLOBAL",8)~THEN KZJJDLG TRJJ6	
	@129
	END
	IF ~~ THEN REPLY @128 GOTO TRJJ6.1
	
CHAIN KZJJDLG TRJJ6.1	
	@127
	=@126
	END
	IF ~~ THEN 
EXIT	
	
CHAIN IF~Global("kzjianjing","GLOBAL",10)~THEN KZJJDLG TRJJ7
	@125
	END
	IF ~~ THEN 
EXIT
	
CHAIN IF~Global("kzjianjing","GLOBAL",12)~THEN KZJJDLG TRJJ8
	@124
	END
	IF ~~ THEN REPLY @123 GOTO TRJJ8.1
	
CHAIN KZJJDLG TRJJ8.1
	@117
	== KZPSDLG @97
	== KZJJDLG @46
	== KZJJDLG @45
	== KZPSDLG @44
	END
	IF ~~ THEN 
EXIT

CHAIN IF~Global("kzjianjing","GLOBAL",14)~THEN KZJJDLG FLJJ1	
	@43
	== KZLZDLG @42
	== KZSWDLG @41
	== KZCBDLG @40
	== KZPSDLG @39
	END
	IF ~~ THEN REPLY @38 EXTERN KZPSDLG FLJJ2	 
	
CHAIN KZPSDLG FLJJ2	 
	@37
	== KZLJDLG @36
	== KZLZDLG @34
	== KZJJDLG @31
	== KZLJDLG @11
	END
	IF ~~ THEN REPLY @30 EXTERN KZPSDLG FLJJ3	 	
	
CHAIN KZPSDLG FLJJ3	
	@29
	== KZCBDLG @24
	== KZSQDLG @15
	== KZJJDLG @14
	== KZSWDLG @13
	END
	IF ~~ THEN REPLY @12
	DO ~SetGlobal("kzpingshou","GLOBAL",15)
	SetGlobal("kzjianjing","GLOBAL",15)
	SetGlobal("kzlijia","GLOBAL",15)
	SetGlobal("kzshouwu","GLOBAL",15)	
	SetGlobal("kzlizuo","GLOBAL",15)		
	SetGlobal("kzchangbin","GLOBAL",15)
	SetGlobal("kzxiangcai","GLOBAL",15)
	SetGlobal("kzdiaocha","GLOBAL",25)
	SetGlobal("kzbeibu","GLOBAL",25)
	StartCutSceneMode()
	StartCutScene("KZCUTJ3")~
EXIT	
	
CHAIN IF~Global("kzjianjing","GLOBAL",20)~THEN KZJJDLG FLJJ4	
	@271
	== KZPSDLG @272
	== KZCBDLG @273
	== KZWFDLG @274
	END
	IF ~~ THEN REPLY @275 EXTERN KZWFDLG FLJJ5	 	
	
CHAIN KZWFDLG FLJJ5
	@276
	== KZWFDLG @277
	== KZLJDLG @278
	== KZPSDLG @279
	== KZWFDLG @280
	END
	IF ~~ THEN REPLY @281 EXTERN KZWFDLG FLJJ6
	
CHAIN KZWFDLG FLJJ6	
	@282
	== KZWFDLG @283
	== KZJJDLG @284
	== KZWFDLG @285
	== KZLJDLG @286
	== KZWFDLG @287
	END
	IF ~~ THEN REPLY @288 EXTERN KZWFDLG FLJJ7	
	
CHAIN KZWFDLG FLJJ7	
	@289
	=@290
	END
	IF ~~ THEN REPLY @291 EXTERN KZWFDLG FLJJ8	
	
CHAIN KZWFDLG FLJJ8
	@292
	== KZPSDLG @293
	== KZSWDLG @294
	== KZJJDLG @295
	== KZLZDLG @296
	== KZCBDLG @297
	== KZLJDLG @298	
	== KZPSDLG @299 
	END
	IF ~~ THEN REPLY @300 EXTERN KZWFDLG FLJJ9		
	
CHAIN KZWFDLG FLJJ9
	@301
	=@302
	END
	IF ~~ THEN
	DO ~AddJournalEntry(@10032,QUEST)
	ClearAllActions()
	StartCutSceneMode()
	StartCutScene("KZCUTJ9")~
EXIT
	
	